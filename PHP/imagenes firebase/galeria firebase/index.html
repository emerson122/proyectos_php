<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- jquery -->
    <script src="Route('https://code.jquery.com/jquery-3.6.0.slim.min.js')" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>

        <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <title>Galeria</title>

    <!-- este me lleva a la carpeta de imagenes -->
    <!-- <script src="js/imagenes.js"></script> -->

    <!-- inicializar firebase -->
    

</head>
<body>
    <div class="container">
      <div class="row">
        <div class="col-sm-8">
          <!-- aqui van las imagenes -->
        </div>
      </div>
    </div>
    <div class="col-sm-4">
      <form id="form-imagenes" action="">
        <label for="" class="btn btn-file">
          <input type="file" name="fichero" id="fichero">
        </label>
      </form>
    </div>

    <script type="module">
  // este script detecta cambios en el input de archivo
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.1/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.9.1/firebase-analytics.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries
    
      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyDBCK7Wp6Do5yRI0gff7cLIb5RNEeo21WE",
        authDomain: "pruebas-b81db.firebaseapp.com",
        databaseURL: "https://pruebas-b81db-default-rtdb.firebaseio.com",
        projectId: "pruebas-b81db",
        storageBucket: "pruebas-b81db.appspot.com",
        messagingSenderId: "982872539918",
        appId: "1:982872539918:web:61fd98196cca9e332a0d5f",
        measurementId: "G-KKWRFB0TZX"
      };
    
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      import { getStorage, ref, uploadBytesResumable } from "firebase/storage";
      const storage = getStorage();
      const storageRef = ref(storage, 'comprobantes/mountains.jpg');

      window.onload = inicializar;
      var fichero;

function inicializar() {
   fichero = document.getElementById("fichero");
   fichero.addEventListener("change", subirImagenAFirebase,false);

   storageRef = app.storage().ref();

}

function subirImagenAFirebase() {
    //fichero es la variable que se declaro anteriormente
    var imagenAsubir = fichero.files[0];

    var uploadTask = storageRef.child("comprobantes/" + imagenAsubir.name).put(imagenAsubir);

    // var mountainsRef = storageRef.child('mountains.jpg');



}
</script>
</body>
</html>